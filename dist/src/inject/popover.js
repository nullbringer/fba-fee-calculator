function setDOMInfo(e){if(!(e.itemName&&e.asin&&e.saleprice&&e.amazonFees&&e.fulfillCost))return showError(chrome.i18n.getMessage("dataExceptionMsg")),void console.log(e);document.getElementById("itemName").textContent=e.itemName,document.getElementById("asin").textContent=e.asin,document.getElementById("salePrice").textContent=e.saleprice,document.getElementById("prodDimensions").textContent=e.itemdimension.Length+" X "+e.itemdimension.Width+" X "+e.itemdimension.Height,document.getElementById("unitWeight").textContent=e.itemweight,document.getElementById("amazonFees").textContent=e.amazonFees,document.getElementById("fulfillCost").textContent=e.fulfillCost,document.getElementById("revenue").textContent=(e.saleprice-e.amazonFees-e.fulfillCost).toFixed(2),calculateWithProductCost(0),document.getElementById("loader").style.display="none",document.getElementById("details").style.display="block"}function showError(e){document.getElementById("show-error-msg").textContent=e,document.getElementById("loader").style.display="none",document.getElementById("show-error-msg").style.display="block"}function calculateWithProductCost(e){var t=Number(document.getElementById("salePrice").textContent),n=Number(document.getElementById("revenue").textContent),o=(n-e).toFixed(2),s=(o/t*100).toFixed(2),m=document.getElementById("netProfit"),d=document.getElementById("netMargin");m.textContent=o,d.textContent=s,o<0?classToElement(document.getElementById("net-section"),"loss","profit"):classToElement(document.getElementById("net-section"),"profit","loss")}function classToElement(e,t,n){e.classList.add(t),e.classList.remove(n)}window.addEventListener("DOMContentLoaded",function(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){"www.amazon.com"===new URL(e[0].url).hostname?chrome.tabs.sendMessage(e[0].id,{from:"popup",subject:"DOMInfo"},function(e){e?e.error?showError(e.error):setDOMInfo(e.productDetails):showError(chrome.i18n.getMessage("generalExceptionMsg"))}):showError(chrome.i18n.getMessage("navigateToHomeSite"))}),document.getElementById("productCostInput").addEventListener("keyup",function(){var e=Number(document.getElementById("productCostInput").value);Number.isNaN(e)?(document.getElementById("productCostInput").value=0,calculateWithProductCost(0)):calculateWithProductCost(e)})});