function getAmazonProductDetails(e,r){var t=JSON.stringify({asin:e});jQuery.ajax({url:"xxx.com/api/",type:"POST",data:t,success:function(e){try{var t=JSON.parse(e);r("true"===t.data.success?{productDetails:t.data}:{error:t.data.error})}catch(r){e({error:chrome.i18n.getMessage("generalExceptionMsg")})}},error:function(e){e({error:chrome.i18n.getMessage("generalExceptionMsg")})}})}chrome.runtime.sendMessage({from:"content",subject:"showPageAction"}),chrome.runtime.onMessage.addListener(function(e,r,t){if("popup"===e.from&&"DOMInfo"===e.subject){var a=jQuery("#ASIN").val();if(a)return getAmazonProductDetails(a,t),!0;t({error:chrome.i18n.getMessage("navigateToProductPage")})}});